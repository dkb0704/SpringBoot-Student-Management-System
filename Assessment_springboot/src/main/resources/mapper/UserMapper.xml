<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.dao.UserMapper">

    <select id="ListUser" resultType="User">
        select * from user
    </select>

    <select id="queryUserByUsernameAndPassword" resultType="User">
        SELECT `id`,`name`,`role`,`gender`,`email`,`phone`,`status` FROM user WHERE username = #{username} AND password = MD5(#{password})
    </select>

    <select id="searchUserById" resultType="User">
        select `id`,`name`,`gender`,`email`,`phone` from user where id = #{id}
    </select>
    <select id="searchAllStudent" resultType="User">
        select * from user where role = 'student'
    </select>
    <insert id="insertUser">
        INSERT INTO `user` (`username`, `password`, `name`, `role`, `gender`, `email`,`phone`) VALUES
        (#{username}, MD5(#{password}), #{name}, #{role}, #{gender}, #{email},#{phone})
    </insert>
    <select id="listCourse" resultType="Course">
        select * from course
    </select>
    <select id="getEnrolledNums" resultType="java.lang.Integer">
        select count(*) from enrollment where course_id = #{courseId};
    </select>


</mapper>